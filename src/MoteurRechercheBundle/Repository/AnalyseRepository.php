<?php

namespace MoteurRechercheBundle\Repository;

/**
 * AnalyseRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class AnalyseRepository extends \Doctrine\ORM\EntityRepository
{

	public function rechercheAnalyse($zoneLibre, $choixLabo, $choixMicroOrg){

		$queryBuider = $this->createQueryBuilder('a');
		$queryBuider 
			//->innerJoin('r.routegroup','rg')
        	//->innerJoin('rg.profiles','p')
			->where('a.nomAnalyse LIKE :zoneLibre OR a.natureAnalyse LIKE :zoneLibre')
			->orderBy('a.nomAnalyse', 'ASC')
			->setParameter('zoneLibre','%'.$zoneLibre.'%');

		return $queryBuider->getQuery()->getResult();	
	}
}
