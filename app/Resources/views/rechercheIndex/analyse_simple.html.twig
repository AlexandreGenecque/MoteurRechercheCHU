{% extends '::base.html.twig' %}

{% block body %}
    <div style="text-align: center">
        <h2 id="nomanalyse">{{ analyse.nomAnalyse }}</h2>

        <p id="natureanalyse">{{ analyse.natureAnalyse }}</p>
    </div>
    <div>
        {% set tube = analyse.getTube().getNomImageTube() %}
        {% set nom = tube~'.jpg' %}
        <img id="fiole" src="{{ asset('bundles/moteurrecherche/images/'~nom) }}" alt="Example"/>

        <div id="cadrebleu">
            <img style="margin-top: 5px" src="{{ asset('bundles/moteurrecherche/images/labo.svg') }}" alt="labo"
                 width="50"/>

            <br>

            <p class="champsfiche">Nature du prélévement:
                <b>{{ analyse.getNaturePrelevement().nomNaturePrelevement }}</b></p>
            {% if analyse.getMicroOrganismeAnalyse().first().getNomMicroOrganisme() is not empty %}
                <br><p class="champsfiche">Micro-Organisme: </p>
                {% for micro in analyse.getMicroOrganismeAnalyse() %}
                    <p class="champsfiche"><b> - {{ micro.getNomMicroOrganisme }}</b></p>
                {% endfor %}
            {% endif %}
            <br>

            <p class="champsfiche">L'analyse se trouve sur la fiche : <a
                        href="{{ analyse.getFichePrescription().url }}">{{ analyse.getFichePrescription().nomFichePrescription }}</a>
            </p>

            <br>

            <p class="champsfiche">Il faut prélever :<b> {{ analyse.contenantAnalyse }}</b></p>
        </div>
        <div id="cadrerouge">
            <img style="margin-top: 5px" src="{{ asset('bundles/moteurrecherche/images/ambulance.svg') }}" alt="labo"
                 width="50"/>
            <br>

            <p class="champsfiche">Acheminer le prélévement au
                laboratoire:<b>{{ analyse.getLaboratoire().nomLaboratoire }}</b></p>
            <br>
            {% if analyse.getAnalyseSaintJulien() =="Oui" %}
                <p class="champsfiche"> ( Analyse également disponible à Saint Julien )</p>
            {% endif %}

            <p class="champsfiche">Température d'acheminement :<b>{{ analyse.getTransport().temperatureTransport }}</b>
                dans un délai de <b>{{ analyse.getTransport().delaiTransport }}</b></p>
        </div>
        <div id="cadrejaune">
            <img style="margin-top: 5px" src="{{ asset('bundles/moteurrecherche/images/warning.svg') }}" alt="labo"
                 width="50"/>
            {% if analyse.getRenseignementClinique().getValeurRC()  is not empty %}
                <p class="champsfiche"><b>{{ analyse.getRenseignementClinique().getValeurRC() }}</b></p>
            {% endif %}
            {% if analyse.getConditionPrelevement().valeurCP or analyse.getConditionPrelevement().precisionCP  is not empty %}
                <br><p id="champsfiche2">Autres renseignements
                utiles:<b>{{ analyse.getConditionPrelevement().valeurCP }}</b>
                <br><b>{{ analyse.getConditionPrelevement().precisionCP }}</b></p>
            {% endif %}
        </div>
    </div>
    <input id="bouton_d" type="button" class="btn btn-primary" value="Plus de détails" onclick="resize()">
    <input id="detailsmoins" type="button" class="btn btn-primary" value="Moins de détails" onclick="moins()">
    <div style="display:none; width: auto;" id="cache" class="media-list">
        <div id="divtarif">
            <span class="champsfiche tarif">Tarification : {{ analyse.getNomenclatureBBhn().getValeurNomenclature() }}</span>
            {% if  analyse.getCodeNomenclature() is not empty %}
                <span class="champsfiche tarif"> Code: {{ analyse.getCodeNomenclature() }}</span>
            {% endif %}
            <br><span class="champsfiche tarif"> Référence GEDI : {{ analyse.getRefGedi() }}</span>
        </div>
        <p class="champsfiche">Analyte : <b>{{ analyse.getAnalyte() }}</b></p>

        <p class="champsfiche">Volume du contenant :<b>{{ analyse.getVolumeContenantAnalyse() }}</b></p>

        <p class="champsfiche">Principe :<b>{{ analyse.getPrincipeMethode().getNomPrincipeMethode() }}</b></p>

        <p class="champsfiche">Délai minimum de réalisation :<b>{{ analyse.getDelaiResultat().getValeurResultat() }}</b>
            Fréquence : <b>{{ analyse.getDelaiResultat().getFrequenceRealisation() }}</b></p>

        <div id="ext">
            <p class="champsfiche"><b>Si vous n’êtes pas sur le site de Charles Nicolle :</b></p>

            <p class="champsfiche">Nous faire
                parvenir : {{ analyse.getNatureMatrice().getValeurMatrice() }} {{ ','~analyse.getNatureMatrice().getPrecisionMatrice() }}</p>

            <p class="champsfiche">Volume Minimum : {{ analyse.getVolumeMinimum() }}</p>

            <p class="champsfiche"><u>Conditions de transport</u><br> Température
                : {{ analyse.getTransport().getTemperatureTransport() }}<br>Délai
                :{{ analyse.getTransport().getDelaiTransport() }}</p>
        </div>
    </div>
    {% set plan = analyse.getLaboratoire().getPlan() %}
    {% set nomlabo = plan~'.jpg' %}
    <img id="carte" src="{{ asset('bundles/moteurrecherche/images/'~nomlabo) }}" alt="Example" onclick="id='carteUP'"
         onmouseout="id='carte'"/>

{% endblock %}